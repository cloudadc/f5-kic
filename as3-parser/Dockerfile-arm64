# docker buildx build -t zongzw/as3-parser:latest-arm64 -f Dockerfile-arm64 .

FROM arm64v8/node:14.17.3-alpine3.14

# to successfully build this image, you need 4 more manual steps:
#   1. run ./build.sh
#   2. edit f5-appsvcs/package.json generated by step 1.
#       remove the reference to f5-schema-doc-xxx reference.
#           "f5-schema-doc": "file:packages/f5-schema-doc-0.1.0.tgz",
#   3. edit f5-appsvcs/package-lock.json genereated by step 1.
#       remove the reference to f5-schema-doc-xxx reference.
#            "f5-schema-doc": {
#   4. cd f5-appsvcs && npm install .
COPY f5-appsvcs /var/config/rest/iapps/f5-appsvcs
COPY parser.app.js /var/config/rest/iapps/f5-appsvcs/app/

CMD ["node", "/var/config/rest/iapps/f5-appsvcs/app/parser.app.js"]
